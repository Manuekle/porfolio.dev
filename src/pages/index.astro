---
import Layout from '../layouts/Layout.astro'
import TopBar from '../components/TopBar.astro'
import Hero from '../components/Hero.astro'
import BentoCard from '../components/BentoCard.astro'
import ProjectDialog from '../components/ProjectDialog.astro'
import { Image } from 'astro:assets'

// Tech Stack Icons
import ReactIcon from '../assets/icons/ReactIcon.astro'
import NextIcon from '../assets/icons/NextIcon.astro'
import TypescriptIcon from '../assets/icons/TypescriptIcon.astro'
import TailwindIcon from '../assets/icons/TailwindIcon.astro'
import NodeIcon from '../assets/icons/NodeIcon.astro'
import PrismaIcon from '../assets/icons/PrismaIcon.astro'
import PythonIcon from '../assets/icons/PythonIcon.astro'
import PostgreIcon from '../assets/icons/PostgreIcon.astro'
import GitIcon from '../assets/icons/GitIcon.astro'
import FlutterIcon from '../assets/icons/FlutterIcon.astro'
import DartIcon from '../assets/icons/DartIcon.astro'
import MongoIcon from '../assets/icons/MongoIcon.astro'
import FigmaIcon from '../assets/icons/FigmaIcon.astro'
import DockerIcon from '../assets/icons/DockerIcon.astro'
import AstroIcon from '../assets/icons/AstroIcon.astro'
import JavascriptIcon from '../assets/icons/JavascriptIcon.astro'
import MySQLIcon from '../assets/icons/MySQLIcon.astro'
import PostmanIcon from '../assets/icons/PostmanIcon.astro'
import VercelIcon from '../assets/icons/VercelIcon.astro'

const name = 'Manuel Erazo'
const title = 'Web Developer | React & Next.js Applications'

const experience = [
  {
    year: '2025',
    title: 'Web Developer',
    organization: 'Smurfit Kappa Cartón Colombia',
  },
  {
    year: '2023 - Present',
    title: 'Freelance Web Developer',
    organization: 'Freelance / Academic Projects',
  },
  {
    year: '2021 - 2026',
    title: 'Computer Science Student',
    organization: 'Fundación Universitaria de Popayán',
  },
]

const projects = [
  {
    title: 'GymRat+',
    description:
      'A comprehensive fitness tracking application designed to help users monitor their workouts, track progress, and achieve their fitness goals with an intuitive interface.',
    image: 'https://manudev.vercel.app/gym-banner.png',
    techStack: ['Next.js', 'TypeScript', 'Prisma', 'PostgreSQL', 'Tailwind CSS'],
    features: [
      'Workout tracking and history',
      'Progress visualization with charts',
      'Custom exercise library',
      'Real-time notifications',
      'Responsive design for mobile and web',
    ],
    webLink: 'https://gymratplus.vercel.app/',
    githubLink: 'https://github.com/Manuekle/gymratplus',
  },
  {
    title: 'ButterflyAR',
    description:
      'An innovative augmented reality educational app that brings butterfly species to life, allowing users to explore and learn about different butterflies in an interactive 3D environment.',
    image: 'https://manudev.vercel.app/butterfly-banner.png',
    techStack: ['Flutter', 'ARCore', 'ARKit', 'Dart'],
    features: [
      'AR visualization of butterfly species',
      'Interactive 3D models',
      'Educational content and facts',
      'Species identification',
      'Cross-platform support (iOS & Android)',
    ],
    githubLink: 'https://github.com/Manuekle/butterflyar-mobile',
  },
  {
    title: 'QR Attendance',
    description:
      'A modern attendance management system using QR codes for quick and efficient student check-ins, designed for educational institutions to streamline attendance tracking.',
    image: 'https://manudev.vercel.app/edutrack-banner.png',
    techStack: ['Next.js', 'React', 'Node.js', 'MongoDB', 'QR Code API'],
    features: [
      'QR code generation for classes',
      'Real-time attendance tracking',
      'Student and teacher dashboards',
      'Attendance reports and analytics',
      'Email notifications',
    ],
    webLink: 'https://edutrack-fup.vercel.app/',
    githubLink: 'https://github.com/Manuekle/edutrack',
  },
]
---

<Layout title="Manuel Erazo - Web Developer">
  <TopBar />

  <Hero name={name} title={title} photoUrl="/placeholder.jpeg" />

  <!-- Bento Grid -->
  <div class="pb-20" style="background-color: #F8F8F8;">
    <div class="mx-auto max-w-5xl px-6">
      <!-- First Row: 3 columns -->
      <div class="mb-6 grid grid-cols-1 gap-6 md:grid-cols-3">
        <!-- My Experience -->
        <BentoCard>
          <h3
            class="mb-4 w-fit rounded-full bg-white px-3 py-1 text-xs font-semibold tracking-[-0.02em] text-zinc-500"
          >
            What I've Done
          </h3>
          <div class="relative">
            <!-- Fade effect top -->
            <div
              class="pointer-events-none absolute top-0 right-0 left-0 z-10 h-8 bg-gradient-to-b from-[#F8F8F8] to-transparent"
            >
            </div>

            <!-- Scrollable content -->
            <div
              class="scrollbar-hide max-h-[200px] space-y-4 overflow-y-auto pr-2"
              style="scrollbar-width: none; -ms-overflow-style: none;"
            >
              <style>
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              </style>
              {
                experience.map((exp) => (
                  <div class="flex items-start gap-3">
                    <div class="mt-2 h-2 w-2 flex-shrink-0 rounded-full bg-black" />
                    <div>
                      <div class="text-xs font-semibold">{exp.title}</div>
                      <div class="text-xs text-gray-600">
                        {exp.year} · {exp.organization}
                      </div>
                    </div>
                  </div>
                ))
              }
            </div>

            <!-- Fade effect bottom -->
            <div
              class="pointer-events-none absolute right-0 bottom-0 left-0 z-10 h-8 bg-gradient-to-t from-[#F8F8F8] to-transparent"
            >
            </div>
          </div>
        </BentoCard>

        <!-- My Projects -->
        <BentoCard>
          <h3
            class="mb-4 w-fit rounded-full bg-white px-3 py-1 text-xs font-semibold tracking-[-0.02em] text-zinc-500"
          >
            Things I've Built
          </h3>
          <div class="grid grid-cols-3 gap-2">
            {
              projects.map((project) => (
                <button
                  class="open-project-dialog aspect-square overflow-hidden rounded-lg transition-all hover:scale-105 hover:shadow-lg"
                  data-project={project.title.toLowerCase().replace(/\s+/g, '-')}
                >
                  <Image
                    src={project.image}
                    alt={project.title}
                    width={100}
                    height={100}
                    class="h-full w-full object-cover"
                  />
                </button>
              ))
            }
          </div>
          <div class="mt-3 text-xs text-gray-600">3 projects · Click to view details</div>
        </BentoCard>

        <!-- Tech Stack -->
        <BentoCard>
          <h3
            class="mb-4 w-fit rounded-full bg-white px-3 py-1 text-xs font-semibold tracking-[-0.02em] text-zinc-500"
          >
            Tools I Use
          </h3>

          <div class="relative">
            <!-- Fade effect top -->
            <div
              class="pointer-events-none absolute top-0 right-0 left-0 z-10 h-8 bg-gradient-to-b from-[#F8F8F8] to-transparent"
            >
            </div>

            <!-- Scrollable content -->
            <div
              class="scrollbar-hide max-h-[200px] space-y-4 overflow-y-auto pr-2"
              style="scrollbar-width: none; -ms-overflow-style: none;"
            >
              <style>
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              </style>

              <!-- Frontend -->
              <div>
                <div class="mb-2 text-[10px] font-semibold text-gray-400 uppercase">Frontend</div>
                <div class="flex flex-wrap gap-2">
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <ReactIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">React</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <NextIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Next.js</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <AstroIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Astro</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <TypescriptIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">TypeScript</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <JavascriptIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">JavaScript</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <TailwindIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Tailwind</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <FlutterIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Flutter</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <DartIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Dart</span>
                  </div>
                </div>
              </div>

              <!-- Backend -->
              <div>
                <div class="mb-2 text-[10px] font-semibold text-gray-400 uppercase">Backend</div>
                <div class="flex flex-wrap gap-2">
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <NodeIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Node.js</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <PythonIcon class="h-6 w-6" />
                    <span class="text-[10px] text-black">Python</span>
                  </div>
                </div>
              </div>

              <!-- Database -->
              <div>
                <div class="mb-2 text-[10px] font-semibold text-gray-400 uppercase">Database</div>
                <div class="flex flex-wrap gap-2">
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <PostgreIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">PostgreSQL</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <MySQLIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">MySQL</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <PrismaIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Prisma</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <MongoIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">MongoDB</span>
                  </div>
                </div>
              </div>

              <!-- Tools -->
              <div>
                <div class="mb-2 text-[10px] font-semibold text-gray-400 uppercase">Tools</div>
                <div class="flex flex-wrap gap-2">
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <GitIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Git</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <FigmaIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Figma</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <DockerIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Docker</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <PostmanIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Postman</span>
                  </div>
                  <div class="flex items-center gap-1.5 rounded-full bg-white px-2 py-1">
                    <VercelIcon class="h-4 w-4" />
                    <span class="text-[10px] text-black">Vercel</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Fade effect bottom -->
            <div
              class="pointer-events-none absolute right-0 bottom-0 left-0 z-10 h-8 bg-gradient-to-t from-[#F8F8F8] to-transparent"
            >
            </div>
          </div>
        </BentoCard>
      </div>

      <!-- Second Row: 2 columns -->
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
        <!-- Location -->
        <BentoCard class="relative overflow-hidden !p-0">
          <div class="relative h-full min-h-[300px]">
            <!-- Map Background -->
            <img
              src="/map.png"
              alt="Popayán, Colombia"
              class="absolute inset-0 h-full w-full object-cover"
            />

            <!-- Gradient Overlay -->
            <div
              class="pointer-events-none absolute inset-0 bg-gradient-to-b from-black/60 via-black/30 to-black/60"
            >
            </div>

            <!-- Map Button - Top Right -->
            <div class="pointer-events-auto absolute top-4 right-4 z-10">
              <a
                href="https://maps.google.com/?q=Popayán,Colombia"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-black transition-colors hover:bg-gray-100"
              >
                Map
              </a>
            </div>

            <!-- Location Text - Centered -->
            <div
              class="pointer-events-none absolute inset-0 flex flex-col items-center justify-center text-center"
            >
              <div class="mb-1 text-4xl font-bold tracking-wider text-white">POPAYÁN</div>
              <div class="text-sm text-white/90">COLOMBIA</div>
            </div>
          </div>
        </BentoCard>

        <!-- How I work -->
        <BentoCard>
          <h3
            class="mb-4 w-fit rounded-full bg-white px-3 py-1 text-xs font-semibold tracking-[-0.02em] text-zinc-500"
          >
            How I Work
          </h3>

          <!-- Content Container with Slide Animation -->
          <div class="relative mb-4 h-[120px] overflow-hidden">
            <div id="work-content" class="transition-all duration-300 ease-in-out">
              <div class="work-step active" data-step="1">
                <div class="mb-2 text-lg font-semibold">1 Discovery Call</div>
                <p class="text-xs text-gray-600">
                  In the first stage, we'll have a Discovery Call to discuss your goals, needs, and
                  project requirements. This helps us align on vision and set the foundation for a
                  successful collaboration.
                </p>
              </div>
              <div class="work-step hidden" data-step="2">
                <div class="mb-2 text-lg font-semibold">2 Proposal & Planning</div>
                <p class="text-xs text-gray-600">
                  I'll create a detailed proposal outlining the project scope, timeline, and
                  deliverables. We'll refine the plan together to ensure everything aligns with your
                  vision.
                </p>
              </div>
              <div class="work-step hidden" data-step="3">
                <div class="mb-2 text-lg font-semibold">3 Design & Development</div>
                <p class="text-xs text-gray-600">
                  This is where the magic happens! I'll design and build your project with attention
                  to detail, keeping you updated throughout the process.
                </p>
              </div>
              <div class="work-step hidden" data-step="4">
                <div class="mb-2 text-lg font-semibold">4 Testing & Review</div>
                <p class="text-xs text-gray-600">
                  Rigorous testing ensures everything works perfectly. We'll review together and
                  make any necessary adjustments before launch.
                </p>
              </div>
              <div class="work-step hidden" data-step="5">
                <div class="mb-2 text-lg font-semibold">5 Launch & Support</div>
                <p class="text-xs text-gray-600">
                  Your project goes live! I'll provide support during the launch and be available
                  for any questions or updates you might need.
                </p>
              </div>
            </div>
          </div>

          <!-- Step Buttons -->
          <div
            class="scrollbar-hide -mx-2 flex gap-1.5 overflow-x-auto px-2"
            style="scrollbar-width: none; -ms-overflow-style: none;"
          >
            <style>
              .scrollbar-hide::-webkit-scrollbar {
                display: none;
              }
            </style>
            <button
              class="work-step-btn active flex-shrink-0 rounded-full bg-black px-3 py-1.5 text-[10px] font-medium text-white transition-colors"
              data-step="1"
            >
              Step 1
            </button>
            <button
              class="work-step-btn flex-shrink-0 rounded-full bg-gray-200 px-3 py-1.5 text-[10px] font-medium text-gray-600 transition-colors"
              data-step="2"
            >
              Step 2
            </button>
            <button
              class="work-step-btn flex-shrink-0 rounded-full bg-gray-200 px-3 py-1.5 text-[10px] font-medium text-gray-600 transition-colors"
              data-step="3"
            >
              Step 3
            </button>
            <button
              class="work-step-btn flex-shrink-0 rounded-full bg-gray-200 px-3 py-1.5 text-[10px] font-medium text-gray-600 transition-colors"
              data-step="4"
            >
              Step 4
            </button>
            <button
              class="work-step-btn flex-shrink-0 rounded-full bg-gray-200 px-3 py-1.5 text-[10px] font-medium text-gray-600 transition-colors"
              data-step="5"
            >
              Step 5
            </button>
          </div>
        </BentoCard>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="py-8" style="background-color: #F8F8F8;">
    <div class="mx-auto max-w-5xl px-6">
      <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
        <div class="text-xs text-gray-600">
          © {new Date().getFullYear()} Manuel Erazo
        </div>
        <div class="flex gap-6">
          <a
            href="https://github.com/manuekle"
            target="_blank"
            class="text-xs text-gray-600 hover:text-black"
          >
            GitHub
          </a>
          <a
            href="https://www.linkedin.com/in/manuekle"
            target="_blank"
            class="text-xs text-gray-600 hover:text-black"
          >
            LinkedIn
          </a>
          <a href="mailto:meerazo7@hotmail.com" class="text-xs text-gray-600 hover:text-black">
            Email
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Project Dialogs -->
  {projects.map((project) => <ProjectDialog project={project} isOpen={false} />)}

  <!-- Dialog Open Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Project Dialogs
      const projectButtons = document.querySelectorAll('.open-project-dialog')

      projectButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const projectId = button.getAttribute('data-project')
          const dialog = document.getElementById(`dialog-${projectId}`)

          if (dialog) {
            dialog.classList.remove('opacity-0', 'pointer-events-none')
          }
        })
      })

      // Work Process Tabs
      const stepButtons = document.querySelectorAll('.work-step-btn')
      const workSteps = document.querySelectorAll('.work-step')
      const workContent = document.getElementById('work-content')
      let currentStep = 1

      stepButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const newStep = parseInt(button.getAttribute('data-step'))

          if (newStep === currentStep) return

          // Determine animation direction
          const direction = newStep > currentStep ? 'left' : 'right'

          // Add slide-out animation
          workContent.style.transform =
            direction === 'left' ? 'translateX(-20px)' : 'translateX(20px)'
          workContent.style.opacity = '0'

          setTimeout(() => {
            // Hide all steps
            workSteps.forEach((step) => {
              step.classList.add('hidden')
              step.classList.remove('active')
            })

            // Show new step
            const newStepElement = document.querySelector(`.work-step[data-step="${newStep}"]`)
            if (newStepElement) {
              newStepElement.classList.remove('hidden')
              newStepElement.classList.add('active')
            }

            // Update button states
            stepButtons.forEach((btn) => {
              btn.classList.remove('active', 'bg-black', 'text-white')
              btn.classList.add('bg-gray-200', 'text-gray-600')
            })
            button.classList.add('active', 'bg-black', 'text-white')
            button.classList.remove('bg-gray-200', 'text-gray-600')

            // Slide-in from opposite direction
            workContent.style.transform =
              direction === 'left' ? 'translateX(20px)' : 'translateX(-20px)'

            setTimeout(() => {
              workContent.style.transform = 'translateX(0)'
              workContent.style.opacity = '1'
            }, 50)

            currentStep = newStep
          }, 150)
        })
      })
    })
  </script>
</Layout>
