---
import { twMerge } from 'tailwind-merge'

interface Props {
  class?: string
  title?: string
  span?: string // e.g., 'col-span-1', 'md:col-span-2'
}

const { class: className, title, span = 'col-span-1' } = Astro.props
---

<div
  class={twMerge(
    'group relative overflow-hidden rounded-xl border border-border bg-card p-6 shadow-sm transition-all duration-300 hover:shadow-md hover:border-primary/20',
    span,
    className
  )}
  onmousemove="handleMouseMove(event)"
>
  <div class="pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100"
       style="background: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.06), transparent 40%);"
  ></div>
  
  <div class="relative h-full">
    {
      title && (
        <h3 class="font-display mb-4 text-lg font-semibold tracking-tight text-foreground">
          {title}
        </h3>
      )
    }
    <slot />
  </div>
</div>

<script is:inline>
  function handleMouseMove(e) {
    const target = e.currentTarget;
    const rect = target.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    target.style.setProperty('--mouse-x', `${x}px`);
    target.style.setProperty('--mouse-y', `${y}px`);
  }
</script>
