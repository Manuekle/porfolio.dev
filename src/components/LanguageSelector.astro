---
const currentPath = Astro.url.pathname
const isEnglish = currentPath.startsWith('/en') && (currentPath.length === 3 || currentPath.startsWith('/en/'))
const otherLang = isEnglish ? 'es' : 'en'

let newPath: string
if (isEnglish) {
  if (currentPath === '/en') {
    newPath = '/'
  } else if (currentPath.startsWith('/en/')) {
    newPath = currentPath.replace('/en', '')
  } else {
    newPath = '/'
  }
} else {
  if (currentPath === '/') {
    newPath = '/en'
  } else if (currentPath.startsWith('/')) {
    newPath = '/en' + currentPath
  } else {
    newPath = '/en'
  }
}

if (newPath === '') newPath = '/'
---

<a
  href={newPath}
  class="flex items-center gap-1 rounded-full bg-white px-2 py-1 text-xs font-medium text-black transition-colors hover:bg-gray-100 border border-zinc-200"
  aria-label="Toggle language"
>
  <span class="uppercase">{otherLang}</span>
</a>
