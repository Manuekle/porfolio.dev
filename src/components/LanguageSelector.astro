---
const currentPath = Astro.url.pathname
const isEnglish = currentPath.startsWith('/en') && (currentPath.length === 3 || currentPath.startsWith('/en/'))
const isSpanish = currentPath.startsWith('/es') && (currentPath.length === 3 || currentPath.startsWith('/es/'))
const otherLang = isEnglish ? 'es' : 'en'

let newPath: string

if (isEnglish) {
  // Currently on English, switch to Spanish
  if (currentPath === '/en') {
    newPath = '/'
  } else if (currentPath.startsWith('/en/')) {
    newPath = currentPath.replace('/en', '')
  } else {
    newPath = '/'
  }
} else if (isSpanish) {
  // Currently on Spanish, switch to English
  if (currentPath === '/es') {
    newPath = '/en'
  } else if (currentPath.startsWith('/es/')) {
    newPath = currentPath.replace('/es', '/en')
  } else {
    newPath = '/en'
  }
} else {
  // Root path or other pages without language prefix
  if (currentPath === '/') {
    newPath = '/en'
  } else {
    newPath = '/en' + currentPath
  }
}

if (newPath === '') newPath = '/'
---

<a
  href={newPath}
  class="flex items-center gap-1 rounded-full bg-white px-2 py-1 text-xs font-medium text-black transition-colors hover:bg-gray-100 border border-zinc-200"
  aria-label="Toggle language"
>
  <span class="uppercase">{otherLang}</span>
</a>
