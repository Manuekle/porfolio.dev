---
import { Image } from 'astro:assets'

export interface Technology {
  name: string
  icon: any
}

export interface ProjectProps {
  title: string
  period: string
  description: string
  image: string
  webLink?: string
  githubLink?: string
  technologies: Technology[]
}

const { title, description, image, webLink, technologies } = Astro.props
---

<div class="project-card group">
  <a href={webLink || '#'} target={webLink ? '_blank' : '_self'} class="block h-full">
    <div
      class="relative h-full overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-1 backdrop-blur-sm transition-all duration-500 hover:border-purple-500/50"
    >
      <!-- Gradient border on hover -->
      <div
        class="absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 opacity-0 blur-xl transition-opacity duration-500 group-hover:opacity-100"
      >
      </div>

      <div class="relative h-full overflow-hidden rounded-xl bg-black/40 backdrop-blur-sm">
        <!-- Image -->
        <div class="relative aspect-[16/10] overflow-hidden">
          <div
            class="absolute inset-0 z-10 bg-gradient-to-t from-black/80 via-black/20 to-transparent"
          >
          </div>
          <Image
            src={image}
            alt={title}
            width={800}
            height={500}
            class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"
          />
        </div>

        <!-- Content -->
        <div class="relative z-20 p-6">
          <h3
            class="mb-3 text-2xl font-bold text-white transition-all duration-300 group-hover:bg-gradient-to-r group-hover:from-purple-400 group-hover:to-pink-400 group-hover:bg-clip-text group-hover:text-transparent"
          >
            {title}
          </h3>
          <p class="mb-4 leading-relaxed text-gray-400">
            {description}
          </p>

          <!-- Tech stack -->
          <div class="flex flex-wrap gap-2">
            {
              technologies
                .slice(0, 3)
                .map((tech) => (
                  <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-gray-300">
                    {tech.name}
                  </span>
                ))
            }
          </div>
        </div>
      </div>
    </div>
  </a>
</div>

<style>
  .project-card {
    perspective: 1000px;
  }

  .project-card:hover > a > div {
    transform: rotateY(5deg) rotateX(5deg);
  }

  @media (hover: hover) {
    .project-card {
      transition: transform 0.1s ease-out;
    }
  }
</style>

<script>
  document.querySelectorAll('.project-card').forEach((card) => {
    card.addEventListener('mousemove', (e) => {
      const rect = card.getBoundingClientRect()
      const x = e.clientX - rect.left
      const y = e.clientY - rect.top

      const centerX = rect.width / 2
      const centerY = rect.height / 2

      const rotateX = (y - centerY) / 20
      const rotateY = (centerX - x) / 20

      const cardInner = card.querySelector('a > div')
      cardInner.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`
    })

    card.addEventListener('mouseleave', () => {
      const cardInner = card.querySelector('a > div')
      cardInner.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)'
    })
  })
</script>
