---
import { Image } from 'astro:assets';
import ProjectsSection from './ProjectsSection.astro';
import type { ProjectProps } from './ProjectCard.astro';

// Import icon components
import ReactIcon from "../assets/icons/ReactIcon.astro";
import PythonIcon from "../assets/icons/PythonIcon.astro";
import AstroIcon from "../assets/icons/AstroIcon.astro";
import TailwindIcon from "../assets/icons/TailwindIcon.astro";
import NodeIcon from "../assets/icons/NodeIcon.astro";
import LaravelIcon from "../assets/icons/LaravelIcon.astro";
import MongoIcon from "../assets/icons/MongoIcon.astro";
import GitIcon from "../assets/icons/GitIcon.astro";
import VitestIcon from "../assets/icons/VitestIcon.astro";
import LinuxIcon from "../assets/icons/LinuxIcon.astro";
import DockerIcon from "../assets/icons/DockerIcon.astro";
import PostmanIcon from "../assets/icons/PostmanIcon.astro";
import FigmaIcon from "../assets/icons/FigmaIcon.astro";
import HtmlIcon from "../assets/icons/HtmlIcon.astro";
import CssIcon from "../assets/icons/CssIcon.astro";
import DjangoIcon from "../assets/icons/DjangoIcon.astro";
import VueIcon from "../assets/icons/VueIcon.astro";
import SvelteIcon from "../assets/icons/SvelteIcon.astro";
import PostgreIcon from "../assets/icons/PostgreIcon.astro";
import MySQLIcon from "../assets/icons/MySQLIcon.astro";
import NextIcon from "../assets/icons/NextIcon.astro";
import PrismaIcon from "../assets/icons/PrismaIcon.astro";
import RedisIcon from "../assets/icons/RedisIcon.astro";
import TypescriptIcon from "../assets/icons/TypescriptIcon.astro";
import JavascriptIcon from "../assets/icons/JavascriptIcon.astro";
import VercelIcon from "../assets/icons/VercelIcon.astro";
import TursoIcon from "../assets/icons/TursoIcon.astro";

interface ContactInfo {
  birthdate?: string;
  phone?: string;
  email?: string;
  linkedin?: string;
  github?: string;
  website?: string;
}

interface Props {
  name: string;
  nameJapanese: string;
  contactInfo: ContactInfo;
  photoUrl?: string;
  projects: ProjectProps[];
  languages: Language[];
  aboutMe: string[];
}


const { 
  name, 
  nameJapanese, 
  contactInfo, 
  photoUrl = "/placeholder.jpeg", 
  projects = [],
  languages = [],
  aboutMe = [],
} = Astro.props;

// Define all skills with component icons
const skills = [
  { name: "react", icon: ReactIcon },
  { name: "tailwind", icon: TailwindIcon },
  { name: "astro", icon: AstroIcon },
  { name: "nextjs", icon: NextIcon },
  { name: "typescript", icon: TypescriptIcon },
  { name: "svelte", icon: SvelteIcon },
  { name: "vue", icon: VueIcon },
  { name: "html", icon: HtmlIcon },
  { name: "css", icon: CssIcon },
  { name: "python", icon: PythonIcon },
  { name: "django", icon: DjangoIcon },
  { name: "laravel", icon: LaravelIcon },
  { name: "node.js", icon: NodeIcon },
  { name: "prisma", icon: PrismaIcon },
  { name: "mongodb", icon: MongoIcon },
  { name: "postgresql", icon: PostgreIcon },
  { name: "redis", icon: RedisIcon },
  { name: "mysql", icon: MySQLIcon },
  { name: "git", icon: GitIcon },
  { name: "vitest", icon: VitestIcon },
  { name: "linux", icon: LinuxIcon },
  { name: "docker", icon: DockerIcon },
  { name: "postman", icon: PostmanIcon },
  { name: "figma", icon: FigmaIcon },
  { name: "javascript", icon: JavascriptIcon },
  { name: "vercel", icon: VercelIcon },
  { name: "turso", icon: TursoIcon },
];
---

<section class="profile-section">
  <h1 class="text-9xl font-display text-kurotobi opacity-5 absolute top-10 left-10">
    {nameJapanese}
  </h1>
  
  <div class="grid grid-cols-1 md:grid-cols-12 gap-8 mt-24">
    <!-- Left column with photo and contact info -->
    <div class="md:col-span-5 flex flex-col items-center">
      <div class="profile-image mb-8">
        <div class="w-64 h-64 rounded-full bg-gray-100 overflow-hidden">
          <Image src={photoUrl || "/placeholder.svg"} alt={name} width={400} height={400} class="w-full h-full object-cover" />
        </div>
      </div>
      
      <div class="contact-info space-y-3 w-full max-w-xs">
        {contactInfo.birthdate && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </span> 
            {contactInfo.birthdate}
          </div>
        )}
        {contactInfo.phone && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
            </span> 
            {contactInfo.phone}
          </div>
        )}
        {contactInfo.email && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </span> 
            {contactInfo.email}
          </div>
        )}
        {contactInfo.linkedin && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                <rect x="2" y="9" width="4" height="12"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
            </span> 
            linkedin.com/in/{contactInfo.linkedin}
          </div>
        )}
        {contactInfo.github && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
              </svg>
            </span> 
            github.com/{contactInfo.github}
          </div>
        )}
        {contactInfo.website && (
          <div class="flex items-center gap-2">
            <span class="text-entan w-5 h-5 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
              </svg>
            </span> 
            {contactInfo.website}
          </div>
        )}
      </div>
      {languages.length > 0 && (
        <div class="languages-section mt-8 w-full max-w-xs">
          <h3 class="text-sm lowercase mb-4 text-center font-display">idiomas</h3>
          <div class="space-y-3">
            {languages.map((language) => (
              <div class="language-item">
                <div class="flex justify-between mb-1">
                  <span class="text-xs font-medium">{language.name}</span>
                  <span class="text-xs text-entan">{language.level}</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-1.5">
                  <div class="bg-[#322B26] h-1.5 rounded-full" style={`width: ${language.percentage}%`}></div>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
      <div class="skills-section mt-8 w-full max-w-xs">
        <h3 class="text-sm lowercase mb-4 text-center font-display">skills</h3>        
        
        <div class="all-skills mt-4">
          <div class="flex flex-wrap justify-center gap-2">
            {skills.map((skill) => (
              <span class="text-xs border border-kurotobi rounded-full font-bold px-2 py-1 mb-1 inline-flex items-center">
                <span class="mr-1 inline-flex items-center justify-center">
                  <skill.icon class="w-4 h-4" />
                </span> 
                {skill.name}
              </span>
            ))}
          </div>
        </div>
        
        <div class="skill-categories flex justify-center gap-4 mt-6">
          <div class="venn-diagram relative w-64 h-32">
            <div class="absolute left-8 top-0 w-24 h-24 rounded-full border border-kurotobi flex items-center justify-center text-xs">
              <span class="jw-full justify-center text-center items-center ">TRABAJO EN EQUIPO</span>
            </div>
            <div class="absolute left-32 top-0 w-24 h-24 rounded-full border border-kurotobi flex items-center justify-center text-xs">
              <span class="w-full justify-center text-center items-center ">AUTONOMIA</span>
            </div>
            <div class="absolute left-20 top-16 w-24 h-24 rounded-full border border-kurotobi flex items-center justify-center text-xs">
              <span class="w-full justify-center text-center items-center ">APRENDIZAJE CONTINUO</span>
            </div>
          </div>
        </div>

        
      </div>
    </div>
    
    <!-- Right column with sections -->
    <div class="md:col-span-7">
      <div class="name-section mb-8">
        <h2 class="text-4xl font-bold font-display">{nameJapanese}</h2>
        <p class="text-sm text-gray-500">{name}</p>
      </div>
      
      <div class="sections space-y-12">
        <!-- About Me Section -->
        {aboutMe.length > 0 && (
          <div class="about-section">
            <h3 class="text-lg font-bold lowercase mb-4 font-display">sobre mí</h3>
            <div class="space-y-4">
              {aboutMe.map((paragraph) => (
                <p class="text-sm text-gray-700">{paragraph}</p>
              ))}
            </div>
          </div>
        )}
        <div class="education-section">
          <h3 class="text-lg font-bold lowercase mb-4 font-display">educación</h3>
          <div class="timeline space-y-3">
            <div class="timeline-item">
              <div class="flex">
                <div class="year w-12 text-xs text-gray-500">2019-2021</div>
                <div class="content">
                  <p class="text-sm">SENA</p>
                  <p class="text-xs text-gray-500">tecnologo en sistemas</p>
                </div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="flex">
                <div class="year w-12 text-xs text-gray-500">2022-2025</div>
                <div class="content">
                  <p class="text-sm">
                    FUNDACION UNIVERSITARIA DE POPAYAN
                  </p>
                  <p class="text-xs text-gray-500">ingenieria de software</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        
        <div class="work-section">
          <h3 class="text-lg font-bold lowercase mb-4 font-display">experiencia</h3>
          <div class="timeline space-y-3">
            <div class="timeline-item">
              <div class="flex">
                <div class="year w-12 text-xs text-gray-500">2020-2021</div>
                <div class="content pl-4">
                  <p class="text-sm">fabrica de software</p>
                  <p class="text-xs text-gray-500">Aplicacion web para el servicio nacional de aprendizaje, donde se manejan los procesos de las dependencias del SENA a nivel nacional, entre ellas bienestar al aprendiz, ENI, SENNOVA, Egresados</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="career-section">
          <h3 class="text-lg font-bold lowercase mb-4 font-display">logros</h3>
          <div class="timeline space-y-3">
            <div class="timeline-item">
              <div class="flex">
                <div class="year w-12 text-xs text-gray-500">2022</div>
                <div class="content pl-4">
                  <p class="text-sm">senasoft 2020</p>
                  <p class="text-xs text-gray-500">Se desarrollo en el encuentro de tecnología que realiza anualmente el servicio nacional de aprendizaje, una sistema de gestion de datos para una entidad medica, la cual nos permitira asignar citas medicas a los pacientes registrados, durante 3 dias de trabajo.</p>
                </div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="flex">
                <div class="year w-12 text-xs text-gray-500">2021</div>
                <div class="content pl-4">
                  <p class="text-sm">edesi 2021</p>
                  <p class="text-xs text-gray-500">Se presento un proyecto de investigacion en el XV encuentro departamental de semilleros de investigacion en el cual se desarrollo un prototipo para la medicion y alerta temprana de parametros fisicoquimicos del agua por telemetria para acueductos rurales.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        {projects.length > 0 && (
          <ProjectsSection title="proyectos" projects={projects} />
        )}
      </div>
    </div>
  </div>
</section>

